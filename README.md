# PiratedHollowKnight

[![Go CI](https://github.com/KodeMat/PiratedHollowKnight/actions/workflows/ci.yml/badge.svg)](https://github.com/KodeMat/PiratedHollowKnight/actions/workflows/ci.yml)

A powerful command-line launcher and save manager for Hollow Knight on Windows.

**Author:** Karel Matthieu L. Logro (Kode / KodeMat)

---

## Download

You can download the latest version of the application directly from the GitHub Releases page.

[**>> Download Latest Release (PiratedHollowKnight.exe) <<**](https://github.com/KodeMat/PiratedHollowKnight/releases/latest/download/PiratedHollowKnight.exe)

Alternatively, you can [view all releases](https://github.com/KodeMat/PiratedHollowKnight/releases/latest) to see the full change history and download source code.

---

## Disclaimer: Piracy and Support for Developers

**This software facilitates the download of a pirated copy of Hollow Knight. The use of this tool for this purpose is not encouraged.**

Hollow Knight is a critically acclaimed masterpiece, crafted by a small and dedicated team. It is the result of immense passion, creativity, and hard work. If you enjoy this game, please consider purchasing a legitimate copy to support Team Cherry, the developers who brought this incredible world to life. This ensures they can continue to create amazing games in the future.

You can buy the game on [Steam](https://store.steampowered.com/app/367520/Hollow_Knight/), [GOG](https://www.gog.com/game/hollow_knight), or other official platforms.

---
## A Note on AI Collaboration

This project represents a modern development paradigm, pairing human architectural vision with AI-driven implementation. I provided the core logic, architectural design, and iterative feedback that shaped the final product.

The majority of the boilerplate and implementation code was generated by Google's Gemini 2.5 Pro, acting under direct and specific instruction from the developer. This collaborative process allowed for rapid prototyping and the exploration of multiple complex architectures—from filesystem watching to symbolic linking to the final, robust environment virtualization model—in a fraction of the time traditional development would take. This README was also drafted by Gemini based on the final codebase and project goals defined by me.

---

## Description

**PiratedHollowKnight** is more than just a launcher; it is a sophisticated tool designed to enhance the Hollow Knight experience for technical users. It provides seamless, multi-instance gameplay without save file collisions and automates the entire installation and dependency management process.

At its core, it solves the problem of running multiple, simultaneous instances of the game by virtualizing the save environment for each process, while also providing robust, live backup capabilities to local or cloud storage.

## Core Features

### 1. Hybrid Save Synchronization

The launcher uses a robust, hybrid model to protect your save data, combining the safety of transactional syncs with the convenience of live backups.

-   **Transactional Startup/Shutdown:** Before the game launches, the launcher identifies the most recently updated save file (local or cloud) and syncs it to the game's save directory. This "Latest-Source-Wins" logic ensures you always pick up where you left off. After you exit the game, your session's progress is atomically synced back to the original source.
-   **Live In-Game Backups:** While you play, the launcher continuously backs up your saves in the background. You can configure each backup target independently:
    -   **Periodic Backups:** Set a time-based interval (e.g., `|300` for every 5 minutes) to have your saves automatically backed up.
    -   **Watcher-Based Backups:** Set `interval=0` (e.g., `|0`) for instant backups. The launcher will watch for file changes and copy them to the destination the moment the game saves.

### 2. Automatic Game Installation
- If the game is not found, the launcher will automatically download it from `buzzheavier.com`.
- **Integrity Guarantee:** A SHA-1 hash (`edf6dbde9a65a6304e096b61b0b2226a6e8a2416`) verifies the download, protecting against corruption.
- **Resilient Downloads:** Can be configured to automatically retry failed downloads, with support for graceful cancellation (Ctrl+C).

### 3. Robust Instance Locking
- **PID-Aware Locking:** The launcher prevents multiple instances from running against the same configuration and potentially corrupting save data. It uses a modern PID-based lock that automatically cleans up stale lock files from crashed or improperly closed sessions.

### 4. Automated & Portable Dependency Management
- **Self-Contained Rclone:** If `rclone.exe` is not found, the launcher automatically downloads it.
- **Automatic Portable Rclone Configuration:** If you use a Google Drive target and no configuration is found, the launcher will **automatically start the interactive `rclone` setup wizard** for a one-time setup. The configuration is saved locally to `rclone.conf`, making the entire tool portable.
- **Extractor Requirement:** Relies on an existing `7-Zip` or `WinRAR` installation.

### 5. Cleanup Utility
- The `clean` command uninstalls all managed components: the Hollow Knight game installation and the downloaded `rclone.exe`.

---

## Usage

This is a command-line utility. Open a terminal (CMD, PowerShell, etc.) in the directory containing the executable.

### First-Time Google Drive Setup
The setup is automatic. Simply run the launcher with a Google Drive target for the first time. The official `rclone` setup wizard will start. Follow the on-screen instructions. This only needs to be done once.
```sh
# This will trigger the setup wizard automatically
.\PiratedHollowKnight.exe --target="gdrive:YourFolderID" --log-level=info
```

### Basic Launch```sh
# Launch the game without save management (no output on success)
.\PiratedHollowKnight.exe
```

### Advanced Launch with Cloud Backups
```sh
# Use a local master save, with a live backup to Google Drive.
# The launcher will automatically detect which save is newer and start from there.
.\PiratedHollowKnight.exe --target="D:\HollowKnightSaves" --target="gdrive:YourFolderID|0|true" --log-level=info
```

---

## Full Command Reference

**Commands:**
- `(no command)`: Runs the default launch sequence.
- `clean`: Deletes the downloaded game and rclone executable.

**Flags:**
- `--target="path[|interval|quit_sync]"`: (Repeatable) Specifies a save location.
- `--install-path="path"`: (Optional) The directory where Hollow Knight should be installed.
- `--config-path="path"`: (Optional) Path to the `rclone.conf` file. Defaults to `rclone.conf` in the executable's directory.
- `--log-level="level"`: (Optional) Set logging verbosity. Options: `info`, `warn`, `error`, `quiet`. Defaults to `quiet`.
- `--auth`: (Optional) Force the `rclone` authentication wizard to run, even if a configuration already exists. Useful for re-authenticating or adding new remotes.
- `--sync-on-quit`: (Optional) A global flag to enable syncing on quit for backup targets.
- `--download-retries[=N]`: (Optional) Number of times to retry the download. Defaults to 1. If the flag is provided without a number (e.g., `--download-retries`), it will retry indefinitely.

---

## Requirements & Setup

1.  **Windows OS:** This tool is designed exclusively for Windows.
2.  **7-Zip or WinRAR:** You must have one of these archive managers installed.
3.  **Internet Connection:** Required for initial downloads.